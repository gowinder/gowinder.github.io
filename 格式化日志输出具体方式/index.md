# 格式化日志输出具体方式


底层函数可以继续使用原来的方式，就是直接写字符串。由其它输出日志函数调用。  

再写一个参数为XMLNODE的代理函数，此函数接受其它全部上层写日志函数的调用，上层函数将其日志格式全部统一，将信息放入XMLNODE中，然后由此代理调用底层函数写日志。  

上层函数，最常用的日志输出有以下几种：直接输出文本（LOGERROR），断言ASSERT，异常CATCH。将这三种独立成三个函数或者宏，实际操作，如LOGERROR生成一个XMLNODE，将日志类型，时间，字符串，等信息写入XMLNODE的属性，然后调用代理函数。  
再讲到每个功能块的日志，如物品流失日志，就需要单独写个上层日志函数，将信息格式化成XMLNODE交给代理函数写入。  

再谈到服务器日志输出容器，就可以根据不同类型的日志进行过滤显示，以及颜色区分，可以将异常日志标为红色以作警示等。  

最后说明一下日志查看器，之所以要做成XML格式的日志，就是方便使用日志查看器，需要说明的是，每加一种新的日志类型，除了要编写加入日志的上层函数外，还要在日志查看器上编写日志解析代码。
